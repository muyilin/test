# 一种基于无人机图像的烟株计数方法

## 技术背景

 

## 现有技术缺陷

现有的烟株计数方法实现复杂（如基于深度学习的方法需要大量样本训练），导致其可推广性低，且影像获取时间要求严格，当烟叶生长至相邻烟株叶片有相互重叠时，计数结果精度低

## 本专利所要解决的技术问题

- 考虑不同烟株长势之间的差异，设置连续的阈值对特征图像进行分割，在不同的分割结果下提取孤立的烟株，解决烟株烟叶交叉重叠导致的精度低的问题;

- 不需要大量样本的训练，简单高效易推广;

- 提出了一套完善的烟株计数方法;

## 技术方案

1. 步骤一：获取无人机可见光图像的获取并对其进行预处理，得到预处理后的可见光图像VIS；

2. 步骤二：基于SAM（Segment Anything Model）模型对图像VIS进行分割，得到地块的矢量图斑VISS；

3. 步骤三：基于图像VIS计算图像红绿比值植被指数特征RG（RG=红波段/绿波段），然后利用图斑VISS对特征RG进行分区统计，得到每个图斑的RG特征均值RGM，设置RGM的阈值范围，进而筛选出烟田地块的矢量图斑，用烟田地块的矢量图斑对VIS图像进行裁剪，进一步得到烟田地块的可见光图像TVIS；

4. 步骤四：对TVIS图像进行HSV变换，提取变换结果图像中的饱和度波段图像S；

5. 步骤五：设置初始阈值y，根据阈值y对饱和度波段图像S的像素进行筛选，若像素值小于y，则删除该像素，将图像S剩余的像素进行栅格转矢量面操作，判断每个矢量面图斑的面积是否小于a，若是，则将满足该条件的矢量面图斑执行步骤八，否则将不满足该条件的矢量面图斑执行步骤六

6. 步骤六：更新y的值，即y=y++,利用步骤五中传递来的矢量面图斑裁剪图像S，而后利用更新后的阈值y对裁剪后的图像S的像素进行筛选，若像素值小于y，则删除该像素，保留大于y的像素，并图像S剩余的像素进行栅格转矢量面操作，而后执行步骤七；

7. 步骤七：判断每个矢量面图斑的面积是否小于a，若是，则将满足该条件的图斑执行步骤八，否则将不满足该条件的图斑执行步骤六，直到所有的图斑面积都满足该条件；

8. 步骤八：将矢量面转点，合并所有矢量点到一个图层P；

9. 步骤九：遍历图层P中每个矢量点与周围矢量点之间的距离，对任一矢量点而言，若存在一个距离小于d，则删除该点，否则保留该点，直到没有点可以删除；

10. 步骤十：统计剩余点的数量，即为烟株数量。


 